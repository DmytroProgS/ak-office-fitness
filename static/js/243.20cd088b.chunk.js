"use strict";(self.webpackChunkak_office_fitness=self.webpackChunkak_office_fitness||[]).push([[243],{2243:(e,s,a)=>{a.r(s),a.d(s,{default:()=>l});var r=a(9379),i=a(5043),n=a(791),t=a(6667),c=a(8279),d=a(579);const l=()=>{const[e]=(0,c.hD)(n.j),[s,a]=(0,i.useState)([]),[l,o]=(0,i.useState)(!0),[u,h]=(0,i.useState)(!1),[j,m]=(0,i.useState)(""),[p,x]=(0,i.useState)(""),[y,f]=(0,i.useState)("");(0,i.useEffect)(()=>{if(!e)return;const s=(0,t.P)((0,t.rJ)(n.db,"injuryRecords"),(0,t._M)("userId","==",e.uid),(0,t.My)("timestamp","desc")),i=(0,t.aQ)(s,e=>{const s=e.docs.map(e=>(0,r.A)({id:e.id},e.data()));a(s),o(!1)},e=>{console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0442\u0440\u0430\u0432\u043c:",e),o(!1)});return()=>i()},[e]);return(0,d.jsxs)("div",{className:"wellness-container",children:[(0,d.jsx)("h1",{children:"\u0406\u0421\u0422\u041e\u0420\u0406\u042f \u0422\u0420\u0410\u0412\u041c \u0422\u0410 \u0417\u0410\u0425\u0412\u041e\u0420\u042e\u0412\u0410\u041d\u042c"}),u&&(0,d.jsx)("div",{className:"success-toast",children:"\u2705 \u0417\u0430\u043f\u0438\u0441 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0434\u043e\u0434\u0430\u043d\u043e \u0434\u043e \u0456\u0441\u0442\u043e\u0440\u0456\u0457!"}),(0,d.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),e)try{await(0,t.gS)((0,t.rJ)(n.db,"injuryRecords"),{userId:e.uid,injuryType:j,date:p,description:y,timestamp:(0,t.O5)()}),h(!0),m(""),x(""),f(""),setTimeout(()=>h(!1),3e3)}catch(a){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456:",a),alert("\u274c \u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0437\u0430\u043f\u0438\u0441. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c (\u043c\u043e\u0436\u043b\u0438\u0432\u043e, \u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u0456\u043d\u0434\u0435\u043a\u0441).")}},className:"wellness-form",children:[(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"\u0422\u0438\u043f \u0442\u0440\u0430\u0432\u043c\u0438 / \u0437\u0430\u0445\u0432\u043e\u0440\u044e\u0432\u0430\u043d\u043d\u044f:"}),(0,d.jsx)("input",{type:"text",value:j,onChange:e=>m(e.target.value),placeholder:"\u041d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434: \u0420\u043e\u0437\u0442\u044f\u0433\u043d\u0435\u043d\u043d\u044f \u043c'\u044f\u0437\u0430 \u0441\u0442\u0435\u0433\u043d\u0430",required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"\u0414\u0430\u0442\u0430 \u0432\u0438\u043d\u0438\u043a\u043d\u0435\u043d\u043d\u044f:"}),(0,d.jsx)("input",{type:"date",value:p,onChange:e=>x(e.target.value),required:!0})]}),(0,d.jsxs)("div",{className:"form-group",children:[(0,d.jsx)("label",{children:"\u041e\u043f\u0438\u0441 \u0442\u0430 \u0441\u0442\u0430\u043d \u043b\u0456\u043a\u0443\u0432\u0430\u043d\u043d\u044f:"}),(0,d.jsx)("textarea",{value:y,onChange:e=>f(e.target.value),placeholder:"\u042f\u043a \u043b\u0456\u043a\u0443\u0454\u0442\u0435, \u0449\u043e \u043a\u0430\u0436\u0435 \u043b\u0456\u043a\u0430\u0440...",rows:"3"})]}),(0,d.jsx)("button",{type:"submit",className:"submit-button",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u0430\u043f\u0438\u0441"})]}),(0,d.jsx)("hr",{className:"divider"}),(0,d.jsx)("h2",{children:"\u0412\u0430\u0448\u0456 \u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456 \u0437\u0430\u043f\u0438\u0441\u0438:"}),l?(0,d.jsx)("p",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0434\u0430\u043d\u0438\u0445..."}):(0,d.jsx)("div",{className:"injury-list",children:0===s.length?(0,d.jsx)("p",{className:"no-data",children:"\u0417\u0430\u043f\u0438\u0441\u0456\u0432 \u043f\u043e\u043a\u0438 \u043d\u0435\u043c\u0430\u0454."}):s.map(e=>(0,d.jsxs)("div",{className:"injury-card",children:[(0,d.jsxs)("div",{className:"injury-card-header",children:[(0,d.jsx)("h3",{children:e.injuryType}),(0,d.jsx)("span",{className:"injury-date",children:e.date})]}),(0,d.jsxs)("div",{className:"injury-card-body",children:[(0,d.jsxs)("p",{children:[(0,d.jsx)("strong",{children:"\u041e\u043f\u0438\u0441:"})," ",e.description||"\u041d\u0435\u043c\u0430\u0454 \u043e\u043f\u0438\u0441\u0443"]}),e.painArea&&(0,d.jsxs)("p",{className:"pain-zones",children:[(0,d.jsx)("strong",{children:"\u0417\u043e\u043d\u0438 \u0431\u043e\u043b\u044e:"})," ",Array.isArray(e.painArea)?e.painArea.join(", "):e.painArea]})]}),(0,d.jsx)("button",{className:"delete-link",onClick:()=>(async e=>{if(window.confirm("\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456, \u0449\u043e \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u0435\u0439 \u0437\u0430\u043f\u0438\u0441?"))try{await(0,t.kd)((0,t.H9)(n.db,"injuryRecords",e))}catch(s){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u0456:",s)}})(e.id),children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0437\u0430\u043f\u0438\u0441"})]},e.id))})]})}}}]);
//# sourceMappingURL=243.20cd088b.chunk.js.map