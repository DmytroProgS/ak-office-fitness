"use strict";(self.webpackChunkak_office_fitness=self.webpackChunkak_office_fitness||[]).push([[422],{6422:(e,s,t)=>{t.r(s),t.d(s,{default:()=>j});var a=t(5043),i=t(791),r=t(6667),n=t(8279),d=t(1180),c=t(8613),l=t(7734),o=t(2185),h=t(6026),u=t(379),m=t(9530),x=t(579);const j=()=>{const[e]=(0,n.hD)(i.j),[s,t]=(0,a.useState)(""),[j,g]=(0,a.useState)([]),[w,p]=(0,a.useState)(!0);(0,a.useEffect)(()=>{if(!e)return;const s=(0,r.P)((0,r.rJ)(i.db,"weightRecords"),(0,r._M)("userId","==",e.uid),(0,r.My)("timestamp","asc")),t=(0,r.aQ)(s,e=>{const s=e.docs.map(e=>{var s;const t=e.data(),a=null===(s=t.timestamp)||void 0===s?void 0:s.toDate();return{id:e.id,weight:parseFloat(t.weight),date:a?a.toLocaleDateString("uk-UA",{day:"2-digit",month:"2-digit"}):"",fullDate:a?a.toLocaleString("uk-UA"):"\u041e\u0431\u0440\u043e\u0431\u043a\u0430..."}});g(s),p(!1)},e=>{console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 Firestore:",e),p(!1)});return()=>t()},[e]);return w?(0,x.jsx)("div",{className:"loading-screen",children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438..."}):(0,x.jsxs)("div",{className:"wellness-container",children:[(0,x.jsx)("h1",{children:"\u041a\u041e\u041d\u0422\u0420\u041e\u041b\u042c \u0412\u0410\u0413\u0418 \u0422\u0406\u041b\u0410"}),(0,x.jsxs)("div",{className:"weight-grid",children:[(0,x.jsxs)("div",{className:"weight-card",children:[(0,x.jsx)("h3",{children:"\u041d\u043e\u0432\u0435 \u0437\u0432\u0430\u0436\u0443\u0432\u0430\u043d\u043d\u044f"}),(0,x.jsxs)("form",{onSubmit:async a=>{if(a.preventDefault(),e&&s)try{await(0,r.gS)((0,r.rJ)(i.db,"weightRecords"),{userId:e.uid,weight:parseFloat(s),timestamp:(0,r.O5)()}),t("")}catch(n){console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456:",n),alert("\u041f\u043e\u043c\u0438\u043b\u043a\u0430! \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c (\u043c\u043e\u0436\u043b\u0438\u0432\u043e, \u043f\u043e\u0442\u0440\u0456\u0431\u0435\u043d \u0456\u043d\u0434\u0435\u043a\u0441)")}},className:"weight-form-inline",children:[(0,x.jsxs)("div",{className:"input-wrapper",children:[(0,x.jsx)("input",{type:"number",step:"0.1",value:s,onChange:e=>t(e.target.value),placeholder:"00.0",required:!0}),(0,x.jsx)("span",{className:"unit-label",children:"\u043a\u0433"})]}),(0,x.jsx)("button",{type:"submit",className:"submit-button",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]}),(0,x.jsxs)("div",{className:"weight-card chart-section",children:[(0,x.jsx)("h3",{children:"\u0414\u0438\u043d\u0430\u043c\u0456\u043a\u0430 \u0437\u043c\u0456\u043d"}),(0,x.jsx)("div",{className:"chart-box",children:j.length>1?(0,x.jsx)(d.u,{width:"100%",height:200,children:(0,x.jsxs)(c.b,{data:j,children:[(0,x.jsx)(l.d,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)",vertical:!1}),(0,x.jsx)(o.W,{dataKey:"date",stroke:"#888",fontSize:12,tickLine:!1}),(0,x.jsx)(h.h,{stroke:"#888",fontSize:12,tickLine:!1,domain:["dataMin - 1","dataMax + 1"]}),(0,x.jsx)(u.m,{contentStyle:{backgroundColor:"#1a1a1a",border:"none",borderRadius:"8px"},itemStyle:{color:"#4CAF50"}}),(0,x.jsx)(m.N1,{type:"monotone",dataKey:"weight",stroke:"#4CAF50",strokeWidth:3,dot:{fill:"#4CAF50",r:4}})]})}):(0,x.jsx)("p",{className:"placeholder-text",children:"\u0414\u043e\u0434\u0430\u0439\u0442\u0435 \u0437\u0430\u043f\u0438\u0441\u0438, \u0449\u043e\u0431 \u043f\u043e\u0431\u0430\u0447\u0438\u0442\u0438 \u0433\u0440\u0430\u0444\u0456\u043a"})})]})]}),(0,x.jsxs)("div",{className:"weight-history-section",children:[(0,x.jsx)("h3",{children:"\u0406\u0441\u0442\u043e\u0440\u0456\u044f \u043e\u0441\u0442\u0430\u043d\u043d\u0456\u0445 \u0437\u0432\u0430\u0436\u0443\u0432\u0430\u043d\u044c"}),(0,x.jsxs)("div",{className:"weight-table",children:[[...j].reverse().map(e=>(0,x.jsxs)("div",{className:"weight-row",children:[(0,x.jsx)("span",{className:"row-date",children:e.fullDate}),(0,x.jsxs)("span",{className:"row-val",children:[e.weight," \u043a\u0433"]}),(0,x.jsx)("button",{className:"row-del",onClick:()=>(async e=>{window.confirm("\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u0435\u0439 \u0437\u0430\u043f\u0438\u0441?")&&await(0,r.kd)((0,r.H9)(i.db,"weightRecords",e))})(e.id),children:"\xd7"})]},e.id)),0===j.length&&(0,x.jsx)("p",{className:"no-data",children:"\u0417\u0430\u043f\u0438\u0441\u0456\u0432 \u0449\u0435 \u043d\u0435\u043c\u0430\u0454"})]})]})]})}}}]);
//# sourceMappingURL=422.f48f4760.chunk.js.map