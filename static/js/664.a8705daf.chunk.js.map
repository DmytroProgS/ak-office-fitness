{"version":3,"file":"static/js/664.a8705daf.chunk.js","mappings":"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","sources":["pages/Profile/Profile.js"],"sourcesContent":["// src/pages/Profile/Profile.js\r\n\r\nimport React, { useState } from 'react';\r\nimport useUserData from '../../hooks/useUserData'; // Для отримання даних\r\nimport { doc, updateDoc } from 'firebase/firestore'; // Для оновлення даних\r\nimport { db } from '../../firebase'; // З'єднання з Firestore\r\n\r\nimport './Profile.css'; // Будемо створювати\r\n\r\nconst Profile = () => {\r\n    // Отримуємо дані користувача через хук\r\n    const { userData, loading: loadingData, error } = useUserData();\r\n    \r\n    // Стан для керування режимом редагування\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    \r\n    // Стан для зберігання даних форми\r\n    const [formData, setFormData] = useState({ \r\n        firstName: '', \r\n        lastName: '', \r\n        birthDate: '', \r\n        height: '', \r\n        weight: '',\r\n        goal: '', \r\n    });\r\n    \r\n    // Стан для відображення повідомлень про оновлення\r\n    const [updateStatus, setUpdateStatus] = useState(null); // 'success', 'error', 'loading'\r\n\r\n    // ⭐ 1. Заповнення форми даними користувача при завантаженні\r\n    React.useEffect(() => {\r\n        if (userData) {\r\n            setFormData({\r\n                firstName: userData.firstName || '',\r\n                lastName: userData.lastName || '',\r\n                // Поле birthDate може бути порожнім, це нормально\r\n                birthDate: userData.birthDate || '', \r\n                height: userData.height || '',\r\n                weight: userData.weight || '',\r\n                goal: userData.goal || '',\r\n            });\r\n        }\r\n    }, [userData]);\r\n\r\n    // ⭐ 2. Обробка змін у формі\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({ ...prev, [name]: value }));\r\n    };\r\n\r\n    // ⭐ 3. Обробка відправки форми (Збереження у Firestore)\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setUpdateStatus('loading');\r\n\r\n        try {\r\n            if (!userData || !userData.uid) {\r\n                throw new Error(\"Не знайдено UID користувача.\");\r\n            }\r\n\r\n            const userDocRef = doc(db, 'users', userData.uid);\r\n            \r\n            // Оновлюємо документ користувача в колекції 'users'\r\n            await updateDoc(userDocRef, formData);\r\n            \r\n            setUpdateStatus('success');\r\n            setIsEditing(false); \r\n            setTimeout(() => setUpdateStatus(null), 3000); \r\n            \r\n        } catch (err) {\r\n            console.error(\"Помилка оновлення профілю:\", err);\r\n            setUpdateStatus('error');\r\n            setTimeout(() => setUpdateStatus(null), 5000);\r\n        }\r\n    };\r\n\r\n    if (loadingData) return <div className=\"profile-container\"><p>Завантаження даних профілю...</p></div>;\r\n    if (error) return <div className=\"profile-container\"><p className=\"status-error\">Помилка завантаження: {error}</p></div>;\r\n    if (!userData) return <div className=\"profile-container\"><p>Дані користувача не знайдені.</p></div>;\r\n\r\n    return (\r\n        <div className=\"profile-container\">\r\n            <h1 className=\"page-title\">Персональний Профіль</h1>\r\n            \r\n            <form onSubmit={handleSubmit} className=\"profile-form\">\r\n                \r\n                {/* -------------------- БАЗОВІ ДАНІ (Тільки для читання) -------------------- */}\r\n                <div className=\"form-section\">\r\n                    <h2>Обліковий запис</h2>\r\n                    <div className=\"info-group\">\r\n                        <label>Електронна пошта:</label>\r\n                        <p className=\"info-value\">{userData.email || 'Не вказано'}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* -------------------- РЕДАГОВАНІ ДАНІ -------------------- */}\r\n                <div className=\"form-section\">\r\n                    <h2>Особиста інформація</h2>\r\n                    \r\n                    {/* ІМ'Я */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"firstName\">Ім'я:</label>\r\n                        <input\r\n                            id=\"firstName\"\r\n                            name=\"firstName\"\r\n                            type=\"text\"\r\n                            value={formData.firstName}\r\n                            onChange={handleChange}\r\n                            readOnly={!isEditing}\r\n                            className={isEditing ? 'editable' : 'read-only'}\r\n                            placeholder=\"Ваше ім'я\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    {/* ПРІЗВИЩЕ */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"lastName\">Прізвище:</label>\r\n                        <input\r\n                            id=\"lastName\"\r\n                            name=\"lastName\"\r\n                            type=\"text\"\r\n                            value={formData.lastName}\r\n                            onChange={handleChange}\r\n                            readOnly={!isEditing}\r\n                            className={isEditing ? 'editable' : 'read-only'}\r\n                            placeholder=\"Ваше прізвище\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    {/* ДАТА НАРОДЖЕННЯ */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"birthDate\">Дата народження:</label>\r\n                        <input\r\n                            id=\"birthDate\"\r\n                            name=\"birthDate\"\r\n                            type=\"date\"\r\n                            value={formData.birthDate}\r\n                            onChange={handleChange}\r\n                            readOnly={!isEditing}\r\n                            className={isEditing ? 'editable' : 'read-only'}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* ЗРІСТ */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"height\">Зріст (см):</label>\r\n                        <input\r\n                            id=\"height\"\r\n                            name=\"height\"\r\n                            type=\"number\"\r\n                            value={formData.height}\r\n                            onChange={handleChange}\r\n                            readOnly={!isEditing}\r\n                            className={isEditing ? 'editable' : 'read-only'}\r\n                            placeholder=\"Наприклад, 180\"\r\n                        />\r\n                    </div>\r\n\r\n                    {/* ВАГА */}\r\n                    <div className=\"form-group\">\r\n                        <label htmlFor=\"weight\">Вага (кг):</label>\r\n                        <input\r\n                            id=\"weight\"\r\n                            name=\"weight\"\r\n                            type=\"number\"\r\n                            value={formData.weight}\r\n                            onChange={handleChange}\r\n                            readOnly={!isEditing}\r\n                            className={isEditing ? 'editable' : 'read-only'}\r\n                            placeholder=\"Наприклад, 80\"\r\n                        />\r\n                    </div>\r\n                    \r\n                    {/* МЕТА */}\r\n                    <div className=\"form-group full-width\">\r\n                        <label htmlFor=\"goal\">Основна мета:</label>\r\n                        <textarea\r\n                            id=\"goal\"\r\n                            name=\"goal\"\r\n                            value={formData.goal}\r\n                            onChange={handleChange}\r\n                            readOnly={!isEditing}\r\n                            className={isEditing ? 'editable' : 'read-only'}\r\n                            placeholder=\"Ваша спортивна мета або мета покращення здоров'я\"\r\n                            rows=\"3\"\r\n                        ></textarea>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* -------------------- КНОПКИ ДІЙ -------------------- */}\r\n                <div className=\"profile-actions\">\r\n                    {updateStatus === 'loading' && <p className=\"status-message loading\">Оновлення даних...</p>}\r\n                    {updateStatus === 'success' && <p className=\"status-message success\">Дані успішно оновлено!</p>}\r\n                    {updateStatus === 'error' && <p className=\"status-message error\">Помилка оновлення. Спробуйте ще раз.</p>}\r\n\r\n                    {!isEditing ? (\r\n                        <button type=\"button\" onClick={() => setIsEditing(true)} className=\"edit-button\">\r\n                            Редагувати профіль\r\n                        </button>\r\n                    ) : (\r\n                        <>\r\n                            <button \r\n                                type=\"submit\" \r\n                                className=\"save-button\" \r\n                                disabled={updateStatus === 'loading'}\r\n                            >\r\n                                Зберегти зміни\r\n                            </button>\r\n                            <button \r\n                                type=\"button\" \r\n                                onClick={() => setIsEditing(false)} \r\n                                className=\"cancel-button\"\r\n                            >\r\n                                Скасувати\r\n                            </button>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Profile;"],"names":["Profile","userData","loading","loadingData","error","useUserData","isEditing","setIsEditing","useState","formData","setFormData","firstName","lastName","birthDate","height","weight","goal","updateStatus","setUpdateStatus","React","handleChange","e","name","value","target","prev","_objectSpread","_jsx","className","children","_jsxs","onSubmit","async","preventDefault","uid","Error","userDocRef","doc","db","updateDoc","setTimeout","err","console","email","htmlFor","id","type","onChange","readOnly","placeholder","rows","_Fragment","disabled","onClick"],"ignoreList":[],"sourceRoot":""}