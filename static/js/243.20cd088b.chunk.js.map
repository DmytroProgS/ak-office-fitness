{"version":3,"file":"static/js/243.20cd088b.chunk.js","mappings":"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","sources":["pages/InjuryStory/InjuryStory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db, auth } from '../../firebase';\r\nimport { collection, addDoc, query, where, orderBy, onSnapshot, serverTimestamp, deleteDoc, doc } from 'firebase/firestore';\r\nimport { useAuthState } from 'react-firebase-hooks/auth';\r\nimport './InjuryStory.css';\r\n\r\nconst InjuryStory = () => {\r\n    const [user] = useAuthState(auth);\r\n    const [records, setRecords] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [showSuccess, setShowSuccess] = useState(false); // Для сповіщення про успіх\r\n    \r\n    // Поля форми\r\n    const [injuryType, setInjuryType] = useState('');\r\n    const [date, setDate] = useState('');\r\n    const [description, setDescription] = useState('');\r\n\r\n    // 1. Отримання даних з Firestore у реальному часі\r\n    useEffect(() => {\r\n        if (!user) return;\r\n\r\n        const q = query(\r\n            collection(db, 'injuryRecords'),\r\n            where('userId', '==', user.uid),\r\n            orderBy('timestamp', 'desc') // Нові зверху\r\n        );\r\n\r\n        const unsubscribe = onSnapshot(q, (snapshot) => {\r\n            const data = snapshot.docs.map(doc => ({\r\n                id: doc.id,\r\n                ...doc.data()\r\n            }));\r\n            setRecords(data);\r\n            setLoading(false);\r\n        }, (error) => {\r\n            console.error(\"Помилка завантаження травм:\", error);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, [user]);\r\n\r\n    // 2. Збереження нової травми\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!user) return;\r\n\r\n        try {\r\n            await addDoc(collection(db, 'injuryRecords'), {\r\n                userId: user.uid,\r\n                injuryType,\r\n                date,\r\n                description,\r\n                timestamp: serverTimestamp()\r\n            });\r\n\r\n            // Показуємо успіх та очищуємо форму\r\n            setShowSuccess(true);\r\n            setInjuryType('');\r\n            setDate('');\r\n            setDescription('');\r\n\r\n            // Приховуємо сповіщення через 3 секунди\r\n            setTimeout(() => setShowSuccess(false), 3000);\r\n\r\n        } catch (error) {\r\n            console.error(\"Помилка при збереженні:\", error);\r\n            alert(\"❌ Не вдалося зберегти запис. Перевірте консоль (можливо, потрібен індекс).\");\r\n        }\r\n    };\r\n\r\n    // 3. Видалення запису (опціонально, але корисно)\r\n    const handleDelete = async (id) => {\r\n        if (window.confirm(\"Ви впевнені, що хочете видалити цей запис?\")) {\r\n            try {\r\n                await deleteDoc(doc(db, 'injuryRecords', id));\r\n            } catch (error) {\r\n                console.error(\"Помилка при видаленні:\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"wellness-container\">\r\n            <h1>ІСТОРІЯ ТРАВМ ТА ЗАХВОРЮВАНЬ</h1>\r\n\r\n            {/* Тост-сповіщення */}\r\n            {showSuccess && (\r\n                <div className=\"success-toast\">\r\n                    ✅ Запис успішно додано до історії!\r\n                </div>\r\n            )}\r\n\r\n            <form onSubmit={handleSubmit} className=\"wellness-form\">\r\n                <div className=\"form-group\">\r\n                    <label>Тип травми / захворювання:</label>\r\n                    <input \r\n                        type=\"text\" \r\n                        value={injuryType} \r\n                        onChange={(e) => setInjuryType(e.target.value)} \r\n                        placeholder=\"Наприклад: Розтягнення м'яза стегна\"\r\n                        required \r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Дата виникнення:</label>\r\n                    <input \r\n                        type=\"date\" \r\n                        value={date} \r\n                        onChange={(e) => setDate(e.target.value)} \r\n                        required \r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Опис та стан лікування:</label>\r\n                    <textarea \r\n                        value={description} \r\n                        onChange={(e) => setDescription(e.target.value)} \r\n                        placeholder=\"Як лікуєте, що каже лікар...\"\r\n                        rows=\"3\"\r\n                    />\r\n                </div>\r\n                <button type=\"submit\" className=\"submit-button\">Додати запис</button>\r\n            </form>\r\n\r\n            <hr className=\"divider\" />\r\n\r\n            <h2>Ваші попередні записи:</h2>\r\n            \r\n            {loading ? (\r\n                <p>Завантаження даних...</p>\r\n            ) : (\r\n                <div className=\"injury-list\">\r\n                    {records.length === 0 ? (\r\n                        <p className=\"no-data\">Записів поки немає.</p>\r\n                    ) : (\r\n                        records.map((record) => (\r\n                            <div key={record.id} className=\"injury-card\">\r\n                                <div className=\"injury-card-header\">\r\n                                    <h3>{record.injuryType}</h3>\r\n                                    <span className=\"injury-date\">{record.date}</span>\r\n                                </div>\r\n                                <div className=\"injury-card-body\">\r\n                                    <p><strong>Опис:</strong> {record.description || 'Немає опису'}</p>\r\n                                    \r\n                                    {/* Відображення зон болю з Wellness-контролю, якщо вони є */}\r\n                                    {record.painArea && (\r\n                                        <p className=\"pain-zones\">\r\n                                            <strong>Зони болю:</strong> {Array.isArray(record.painArea) ? record.painArea.join(', ') : record.painArea}\r\n                                        </p>\r\n                                    )}\r\n                                </div>\r\n                                <button \r\n                                    className=\"delete-link\" \r\n                                    onClick={() => handleDelete(record.id)}\r\n                                >\r\n                                    Видалити запис\r\n                                </button>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InjuryStory;"],"names":["InjuryStory","user","useAuthState","auth","records","setRecords","useState","loading","setLoading","showSuccess","setShowSuccess","injuryType","setInjuryType","date","setDate","description","setDescription","useEffect","q","query","collection","db","where","uid","orderBy","unsubscribe","onSnapshot","snapshot","data","docs","map","doc","_objectSpread","id","error","console","_jsxs","className","children","_jsx","onSubmit","async","e","preventDefault","addDoc","userId","timestamp","serverTimestamp","setTimeout","alert","type","value","onChange","target","placeholder","required","rows","length","record","painArea","Array","isArray","join","onClick","window","confirm","deleteDoc","handleDelete"],"ignoreList":[],"sourceRoot":""}